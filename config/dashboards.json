{"dashboards": [{"annotations": {"list": [{"builtIn": 1, "datasource": {"type": "grafana", "uid": "-- Grafana --"}, "enable": true, "hide": true, "iconColor": "rgba(0, 211, 255, 1)", "name": "Annotations & Alerts", "target": {"limit": 100, "matchAny": false, "tags": [], "type": "dashboard"}, "type": "dashboard"}]}, "editable": true, "fiscalYearStartMonth": 0, "graphTooltip": 0, "id": 1, "links": [], "liveNow": false, "panels": [{"collapsed": false, "gridPos": {"h": 1, "w": 24, "x": 0, "y": 0}, "id": 10, "panels": [], "title": "Successful Requests", "type": "row"}, {"datasource": {}, "description": "", "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "axisSoftMin": 0, "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "auto", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 80}]}, "unit": "ms"}, "overrides": []}, "gridPos": {"h": 12, "w": 24, "x": 0, "y": 1}, "id": 3, "options": {"legend": {"calcs": ["last", "lastNotNull", "min", "max", "mean"], "displayMode": "table", "placement": "bottom", "showLegend": true}, "tooltip": {"maxHeight": 600, "mode": "multi", "sort": "none"}}, "targets": [{"datasource": {"type": "loki", "uid": "NGMbUmp4k"}, "editorMode": "code", "expr": "avg(avg_over_time(\n{host=~\".+\", host=\"docker\", filename=~\"/logs/http-ping/.*\", url=~\"$url\"}\n|= \"time=\"\n| regexp \"status=\\\"(?P<status>[^ ]+)\\\"\"\n| regexp \"error=\\\"(?P<error>[^ ]+)\\\"\"\n| error = \"\"\n| regexp \"time=\\\"(?P<time>[^ ]+)\\\"\" \n| unwrap time\n[$interval]\n)) by (url)", "legendFormat": "{{url}}", "queryType": "range", "refId": "A"}], "title": "Total Request Time by URL", "type": "timeseries"}, {"collapsed": false, "gridPos": {"h": 1, "w": 24, "x": 0, "y": 13}, "id": 12, "panels": [], "title": "Sucessful Requests by Status", "type": "row"}, {"datasource": {}, "description": "", "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "axisSoftMin": 0, "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "auto", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 80}]}, "unit": "ms"}, "overrides": []}, "gridPos": {"h": 12, "w": 24, "x": 0, "y": 14}, "id": 4, "options": {"legend": {"calcs": ["last", "lastNotNull", "min", "max", "mean"], "displayMode": "table", "placement": "bottom", "showLegend": true}, "tooltip": {"maxHeight": 600, "mode": "multi", "sort": "none"}}, "targets": [{"datasource": {"type": "loki", "uid": "NGMbUmp4k"}, "editorMode": "code", "expr": "avg(avg_over_time(\n{host=~\".+\", host=\"docker\", filename=~\"/logs/http-ping/.*\", url=~\"$url\"}\n|= \"time=\"\n| regexp \"status=\\\"(?P<status>[^ ]+)\\\"\"\n| regexp \"error=\\\"(?P<error>[^ ]+)\\\"\"\n| error = \"\"\n| regexp \"time=\\\"(?P<time>[^ ]+)\\\"\" \n| unwrap time\n[$interval]\n)) by (url, status)", "legendFormat": "{{url}}, {{status}}", "queryType": "range", "refId": "A"}], "title": "Total Request Time by URL and Status", "type": "timeseries"}, {"datasource": {}, "description": "", "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "axisSoftMin": 0, "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": {"log": 10, "type": "log"}, "showPoints": "auto", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "min": 0, "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 80}]}, "unit": "decbytes"}, "overrides": []}, "gridPos": {"h": 12, "w": 24, "x": 0, "y": 26}, "id": 13, "options": {"legend": {"calcs": ["last", "lastNotNull", "min", "max", "mean"], "displayMode": "table", "placement": "bottom", "showLegend": true}, "tooltip": {"maxHeight": 600, "mode": "multi", "sort": "none"}}, "targets": [{"datasource": {"type": "loki", "uid": "NGMbUmp4k"}, "editorMode": "code", "expr": "avg(avg_over_time(\n{host=~\".+\", host=\"docker\", filename=~\"/logs/http-ping/.*\", url=~\"$url\"}\n|= \"time=\"\n| regexp \"size=\\\"(?P<size>[^ ]+)\\\"\"\n| regexp \"error=\\\"(?P<error>[^ ]+)\\\"\"\n| error = \"\"\n| regexp \"time=\\\"(?P<time>[^ ]+)\\\"\" \n| unwrap size\n[$interval]\n)) by (url, size)", "legendFormat": "{{url}}", "queryType": "range", "refId": "A"}], "title": "Successful Requests by Size", "type": "timeseries"}, {"datasource": {}, "description": "", "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "Count", "axisPlacement": "auto", "axisSoftMin": 0, "barAlignment": 0, "drawStyle": "bars", "fillOpacity": 0, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "auto", "spanNulls": false, "stacking": {"group": "A", "mode": "normal"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 80}]}, "unit": "none"}, "overrides": []}, "gridPos": {"h": 10, "w": 24, "x": 0, "y": 38}, "id": 5, "options": {"legend": {"calcs": ["last", "lastNotNull", "min", "max", "mean"], "displayMode": "table", "placement": "bottom", "showLegend": true}, "tooltip": {"maxHeight": 600, "mode": "multi", "sort": "none"}}, "targets": [{"datasource": {"type": "loki", "uid": "NGMbUmp4k"}, "editorMode": "code", "expr": "count(count_over_time(\n{host=~\".+\", host=\"docker\", filename=~\"/logs/http-ping/.*\", url=~\"$url\"}\n|= \"time=\"\n| regexp \"status=\\\"(?P<status>[^ ]+)\\\"\"\n| regexp \"error=\\\"(?P<error>[^ ]+)\\\"\"\n| error = \"\"\n| regexp \"time=\\\"(?P<time>[^ ]+)\\\"\" \n[$interval]\n)) by (url, status)", "legendFormat": "{{url}}, {{status}}", "queryType": "range", "refId": "A"}], "title": "Num Requests by URL and Status", "type": "timeseries"}, {"collapsed": false, "gridPos": {"h": 1, "w": 24, "x": 0, "y": 48}, "id": 8, "panels": [], "title": "Failed Requests", "type": "row"}, {"datasource": {}, "description": "", "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "axisSoftMin": 0, "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": {"log": 10, "type": "log"}, "showPoints": "auto", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 80}]}, "unit": "ms"}, "overrides": []}, "gridPos": {"h": 10, "w": 24, "x": 0, "y": 49}, "id": 6, "options": {"legend": {"calcs": ["last", "lastNotNull", "min", "max", "mean"], "displayMode": "table", "placement": "bottom", "showLegend": true}, "tooltip": {"maxHeight": 600, "mode": "multi", "sort": "none"}}, "targets": [{"datasource": {"type": "loki", "uid": "NGMbUmp4k"}, "editorMode": "code", "expr": "avg(avg_over_time(\n{host=~\".+\", host=\"docker\", filename=~\"/logs/http-ping/.*\", url=~\"$url\"}\n|= \"time=\"\n| regexp \"status=\\\"(?P<status>[^ ]+)\\\"\"\n| regexp \"error=\\\"(?P<error>[^ ]+)\\\"\"\n| error != \"\"\n| regexp \"time=\\\"(?P<time>[^ ]+)\\\"\" \n| unwrap time\n[$interval]\n)) by (url, error)", "legendFormat": "{{url}}, {{error}}", "queryType": "range", "refId": "A"}], "title": "Failed Results by URL and Error", "type": "timeseries"}], "refresh": "5s", "schemaVersion": 39, "tags": [], "templating": {"list": [{"auto": false, "auto_count": 30, "auto_min": "10s", "current": {"selected": false, "text": "1m", "value": "1m"}, "hide": 0, "name": "interval", "options": [{"selected": false, "text": "10s", "value": "10s"}, {"selected": false, "text": "15s", "value": "15s"}, {"selected": false, "text": "30s", "value": "30s"}, {"selected": true, "text": "1m", "value": "1m"}, {"selected": false, "text": "5m", "value": "5m"}, {"selected": false, "text": "15m", "value": "15m"}, {"selected": false, "text": "30m", "value": "30m"}, {"selected": false, "text": "1h", "value": "1h"}, {"selected": false, "text": "6h", "value": "6h"}, {"selected": false, "text": "12h", "value": "12h"}, {"selected": false, "text": "1d", "value": "1d"}, {"selected": false, "text": "7d", "value": "7d"}, {"selected": false, "text": "14d", "value": "14d"}, {"selected": false, "text": "30d", "value": "30d"}], "query": "10s,15s,30s,1m,5m,15m,30m,1h,6h,12h,1d,7d,14d,30d", "queryValue": "", "refresh": 2, "skipUrlSync": false, "type": "interval"}, {"current": {"selected": true, "text": ["All"], "value": ["$__all"]}, "definition": "", "description": "URL", "hide": 0, "includeAll": true, "label": "URL", "multi": true, "name": "url", "options": [], "query": {"label": "url", "refId": "LokiVariableQueryEditor-VariableQuery", "stream": "", "type": 1}, "refresh": 2, "regex": "", "skipUrlSync": false, "sort": 0, "type": "query"}]}, "time": {"from": "now-5m", "to": "now"}, "timeRangeUpdatedDuringEditOrView": false, "timepicker": {}, "timezone": "", "title": "HTTP Ping Results", "uid": "tVWgvc8Vz", "version": 4, "weekStart": ""}, {"annotations": {"list": [{"builtIn": 1, "datasource": {"type": "datasource", "uid": "grafana"}, "enable": true, "hide": true, "iconColor": "rgba(0, 211, 255, 1)", "name": "Annotations & Alerts", "target": {"limit": 100, "matchAny": false, "tags": [], "type": "dashboard"}, "type": "dashboard"}]}, "editable": true, "fiscalYearStartMonth": 0, "graphTooltip": 0, "id": 2, "links": [{"asDropdown": false, "icon": "external link", "includeVars": false, "keepTime": false, "tags": [], "targetBlank": true, "title": "Grafana Playground GitHub Page", "tooltip": "", "type": "link", "url": "https://github.com/dmuth/grafana-playground"}], "liveNow": false, "panels": [{"collapsed": false, "datasource": {"type": "loki", "uid": "MMhqQtOVz"}, "gridPos": {"h": 1, "w": 24, "x": 0, "y": 0}, "id": 4, "panels": [], "targets": [{"datasource": {"type": "loki", "uid": "MMhqQtOVz"}, "refId": "A"}], "title": "Main", "type": "row"}, {"datasource": {}, "description": "", "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "axisSoftMin": 0, "barAlignment": 0, "drawStyle": "bars", "fillOpacity": 0, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "insertNulls": false, "lineInterpolation": "linear", "lineStyle": {"fill": "solid"}, "lineWidth": 1, "pointSize": 5, "scaleDistribution": {"log": 10, "type": "log"}, "showPoints": "auto", "spanNulls": true, "stacking": {"group": "A", "mode": "normal"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]}}, "overrides": []}, "gridPos": {"h": 12, "w": 24, "x": 0, "y": 1}, "id": 10, "maxDataPoints": 1000000, "options": {"legend": {"calcs": ["last", "lastNotNull", "mean"], "displayMode": "table", "placement": "bottom", "showLegend": true}, "tooltip": {"maxHeight": 600, "mode": "single", "sort": "none"}}, "pluginVersion": "8.1.2", "targets": [{"datasource": {"type": "loki", "uid": "MMhqQtOVz"}, "editorMode": "code", "expr": "sum(count_over_time({host!=\"docker-desktop\",filename=~\"/.*\"}[$interval])) by (filename)", "legendFormat": "{{filename}}", "queryType": "range", "refId": "A"}], "title": "Volume by file ($interval interval)", "type": "timeseries"}, {"datasource": {}, "gridPos": {"h": 5, "w": 24, "x": 0, "y": 13}, "id": 6, "options": {"dedupStrategy": "none", "enableLogDetails": true, "prettifyLogMessage": false, "showCommonLabels": false, "showLabels": false, "showTime": false, "sortOrder": "Descending", "wrapLogMessage": false}, "pluginVersion": "8.1.2", "targets": [{"datasource": {"type": "loki", "uid": "MMhqQtOVz"}, "editorMode": "code", "expr": "{host!=\"docker-desktop\",filename=\"/logs/synthetic/synthetic.log\"}", "maxLines": 5, "queryType": "range", "refId": "A"}], "title": "5 Most Recent Synthetic Log Entries", "type": "logs"}, {"datasource": {}, "gridPos": {"h": 10, "w": 24, "x": 0, "y": 18}, "id": 7, "options": {"dedupStrategy": "none", "enableLogDetails": true, "prettifyLogMessage": false, "showCommonLabels": false, "showLabels": false, "showTime": false, "sortOrder": "Descending", "wrapLogMessage": true}, "pluginVersion": "8.1.2", "targets": [{"datasource": {"type": "loki", "uid": "MMhqQtOVz"}, "editorMode": "code", "expr": "{host!=\"docker-desktop\",filename=~\"/.*\"}", "maxLines": 100, "queryType": "range", "refId": "A"}], "title": "100 Most Recent Log Entries", "type": "logs"}], "refresh": "", "schemaVersion": 39, "tags": [], "templating": {"list": [{"auto": false, "auto_count": 30, "auto_min": "10s", "current": {"selected": false, "text": "1m", "value": "1m"}, "hide": 0, "name": "interval", "options": [{"selected": false, "text": "10s", "value": "10s"}, {"selected": false, "text": "30s", "value": "30s"}, {"selected": true, "text": "1m", "value": "1m"}, {"selected": false, "text": "10m", "value": "10m"}, {"selected": false, "text": "30m", "value": "30m"}, {"selected": false, "text": "1h", "value": "1h"}, {"selected": false, "text": "6h", "value": "6h"}, {"selected": false, "text": "12h", "value": "12h"}, {"selected": false, "text": "1d", "value": "1d"}, {"selected": false, "text": "7d", "value": "7d"}, {"selected": false, "text": "14d", "value": "14d"}, {"selected": false, "text": "30d", "value": "30d"}], "query": "10s,30s,1m,10m,30m,1h,6h,12h,1d,7d,14d,30d", "queryValue": "", "refresh": 2, "skipUrlSync": false, "type": "interval"}]}, "time": {"from": "now-5m", "to": "now"}, "timeRangeUpdatedDuringEditOrView": false, "timepicker": {}, "timezone": "", "title": "Loki Log Volume", "uid": "fponVrV7z", "version": 2, "weekStart": ""}, {"annotations": {"list": [{"builtIn": 1, "datasource": {"type": "datasource", "uid": "grafana"}, "enable": true, "hide": true, "iconColor": "rgba(0, 211, 255, 1)", "name": "Annotations & Alerts", "target": {"limit": 100, "matchAny": false, "tags": [], "type": "dashboard"}, "type": "dashboard"}]}, "editable": true, "fiscalYearStartMonth": 0, "graphTooltip": 0, "id": 3, "links": [{"asDropdown": false, "icon": "external link", "includeVars": false, "keepTime": false, "tags": [], "targetBlank": true, "title": "Grafana Playground GitHub Page", "tooltip": "", "type": "link", "url": "https://github.com/dmuth/grafana-playground"}, {"asDropdown": false, "icon": "dashboard", "includeVars": true, "keepTime": true, "tags": [], "targetBlank": false, "title": "Ping Results - Internal vs External", "tooltip": "", "type": "link", "url": "/d/KfLZ8yvVk/"}, {"asDropdown": false, "icon": "dashboard", "includeVars": true, "keepTime": true, "tags": [], "targetBlank": false, "title": "Ping Results - Internal vs Upstream vs External", "tooltip": "", "type": "link", "url": "http://localhost:3000/d/BXSaiQcVz"}], "liveNow": false, "panels": [{"datasource": {}, "description": "", "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "ms", "axisPlacement": "auto", "axisSoftMin": 0, "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "auto", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 80}]}}, "overrides": []}, "gridPos": {"h": 14, "w": 23, "x": 0, "y": 0}, "id": 2, "options": {"legend": {"calcs": ["last", "lastNotNull", "min", "max", "mean"], "displayMode": "table", "placement": "bottom", "showLegend": true}, "tooltip": {"maxHeight": 600, "mode": "multi", "sort": "none"}}, "targets": [{"datasource": {"type": "loki", "uid": "NGMbUmp4k"}, "editorMode": "code", "expr": "avg(avg_over_time(\n{host=~\".+\", host=\"docker\", filename=~\"/logs/ping/.*\", target=~\"$host\" } \n|= \"time=\"\n| regexp \"target=(?P<target>[^ ]+)\"\n| regexp \"time=(?P<time>[^ ]+)\"\n| unwrap time\n[$interval]\n)) by (target)\n\n", "legendFormat": "{{target}}", "queryType": "range", "refId": "A"}], "title": "Ping Times ($interval interval)", "type": "timeseries"}, {"datasource": {"type": "loki", "uid": "cdn42ujjafrpcd"}, "description": "", "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "% packet loss", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "auto", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "max": 100, "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 80}]}}, "overrides": []}, "gridPos": {"h": 11, "w": 23, "x": 0, "y": 14}, "id": 4, "options": {"legend": {"calcs": ["last", "lastNotNull", "min", "max", "mean"], "displayMode": "table", "placement": "bottom", "showLegend": true}, "tooltip": {"maxHeight": 600, "mode": "multi", "sort": "none"}}, "targets": [{"datasource": {"type": "loki", "uid": "NGMbUmp4k"}, "editorMode": "code", "expr": "avg(avg_over_time(\n{ filename=~\"/logs/ping/.*\", target!=\"\", target!~\"internal-.*\" } \n|= \"transmitted\"\n| logfmt \n| line_format \"pct={{divf .received .transmitted | mulf 100 | sub 100 }}\"\n| logfmt \n| unwrap pct\n| __error__!=\"SampleExtractionErr\"\n[$interval]\n)) \n\n", "legendFormat": "{{target}}", "queryType": "range", "refId": "A"}], "title": "Packet Loss - External Hosts ($interval interval)", "type": "timeseries"}, {"datasource": {}, "description": "", "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "% packet loss", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "auto", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "max": 100, "thresholds": {"mode": "absolute", "steps": [{"color": "green"}, {"color": "red", "value": 80}]}}, "overrides": []}, "gridPos": {"h": 14, "w": 23, "x": 0, "y": 25}, "id": 3, "options": {"legend": {"calcs": ["last", "lastNotNull", "min", "max", "mean"], "displayMode": "table", "placement": "bottom", "showLegend": true}, "tooltip": {"maxHeight": 600, "mode": "multi", "sort": "none"}}, "targets": [{"datasource": {"type": "loki", "uid": "RFdn8Qtnz"}, "editorMode": "code", "expr": "avg(avg_over_time(\n{ filename=~\"/logs/ping/.*\", target != \"\", target!~\"internal-.*\", target=~\"$host\" } \n|= \"transmitted\"\n| logfmt \n| line_format \"pct={{divf .received .transmitted | mulf 100 | sub 100 }}\"\n| logfmt \n| unwrap pct\n| __error__!=\"SampleExtractionErr\"\n[$interval]\n)) by (target)\n\n", "legendFormat": "{{target}}", "queryType": "range", "refId": "A"}], "title": "Packet Loss by Host - External Hosts ($interval interval)", "type": "timeseries"}, {"datasource": {}, "description": "", "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "% packet loss", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "auto", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "max": 100, "thresholds": {"mode": "absolute", "steps": [{"color": "green"}, {"color": "red", "value": 80}]}}, "overrides": []}, "gridPos": {"h": 14, "w": 23, "x": 0, "y": 39}, "id": 5, "options": {"legend": {"calcs": ["last", "lastNotNull", "min", "max", "mean"], "displayMode": "table", "placement": "bottom", "showLegend": true}, "tooltip": {"maxHeight": 600, "mode": "multi", "sort": "none"}}, "targets": [{"datasource": {"type": "loki", "uid": "RFdn8Qtnz"}, "editorMode": "code", "expr": "avg(avg_over_time(\n{ filename=~\"/logs/ping/.*\", target != \"\", target=~\"internal-.*\", target=~\"$host\"} \n|= \"transmitted\"\n| logfmt \n| line_format \"pct={{divf .received .transmitted | mulf 100 | sub 100 }}\"\n| logfmt \n| unwrap pct\n| __error__!=\"SampleExtractionErr\"\n[$interval]\n)) by (target)\n\n", "legendFormat": "{{target}}", "queryType": "range", "refId": "A"}], "title": "Packet Loss by Host - Internal Hosts ($interval interval)", "type": "timeseries"}], "refresh": "", "schemaVersion": 39, "tags": [], "templating": {"list": [{"auto": false, "auto_count": 30, "auto_min": "10s", "current": {"selected": false, "text": "10s", "value": "10s"}, "hide": 0, "name": "interval", "options": [{"selected": true, "text": "10s", "value": "10s"}, {"selected": false, "text": "30s", "value": "30s"}, {"selected": false, "text": "1m", "value": "1m"}, {"selected": false, "text": "5m", "value": "5m"}, {"selected": false, "text": "15m", "value": "15m"}, {"selected": false, "text": "30m", "value": "30m"}, {"selected": false, "text": "1h", "value": "1h"}, {"selected": false, "text": "6h", "value": "6h"}, {"selected": false, "text": "12h", "value": "12h"}, {"selected": false, "text": "1d", "value": "1d"}, {"selected": false, "text": "7d", "value": "7d"}, {"selected": false, "text": "14d", "value": "14d"}, {"selected": false, "text": "30d", "value": "30d"}], "query": "10s,30s,1m,5m,15m,30m,1h,6h,12h,1d,7d,14d,30d", "queryValue": "", "refresh": 2, "skipUrlSync": false, "type": "interval"}, {"current": {"selected": true, "text": ["All"], "value": ["$__all"]}, "datasource": {"type": "loki", "uid": "cdn42ujjafrpcd"}, "definition": "", "hide": 0, "includeAll": true, "multi": true, "name": "host", "options": [], "query": {"label": "target", "refId": "LokiVariableQueryEditor-VariableQuery", "stream": "", "type": 1}, "refresh": 2, "regex": "", "skipUrlSync": false, "sort": 1, "type": "query"}]}, "time": {"from": "now-5m", "to": "now"}, "timeRangeUpdatedDuringEditOrView": false, "timepicker": {"refresh_intervals": ["5s", "10s", "30s", "1m", "5m", "15m", "30m", "1h", "2h", "1d"]}, "timezone": "", "title": "Ping Results", "uid": "WiThvuS7z", "version": 6, "weekStart": ""}, {"annotations": {"list": [{"builtIn": 1, "datasource": {"type": "datasource", "uid": "grafana"}, "enable": true, "hide": true, "iconColor": "rgba(0, 211, 255, 1)", "name": "Annotations & Alerts", "target": {"limit": 100, "matchAny": false, "tags": [], "type": "dashboard"}, "type": "dashboard"}]}, "editable": true, "fiscalYearStartMonth": 0, "graphTooltip": 0, "id": 4, "links": [{"asDropdown": false, "icon": "external link", "includeVars": false, "keepTime": false, "tags": [], "targetBlank": true, "title": "Grafana Playground GitHub Page", "tooltip": "", "type": "link", "url": "https://github.com/dmuth/grafana-playground"}, {"asDropdown": false, "icon": "dashboard", "includeVars": true, "keepTime": true, "tags": [], "targetBlank": false, "title": "Ping Results", "tooltip": "", "type": "link", "url": "/d/WiThvuS7z/"}, {"asDropdown": false, "icon": "dashboard", "includeVars": true, "keepTime": true, "tags": [], "targetBlank": false, "title": "Ping Results - Internal vs Upstream vs External", "tooltip": "", "type": "link", "url": "/d/BXSaiQcVz"}], "liveNow": false, "panels": [{"datasource": {}, "description": "", "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "ms", "axisPlacement": "auto", "axisSoftMin": 0, "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "auto", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 80}]}}, "overrides": []}, "gridPos": {"h": 14, "w": 23, "x": 0, "y": 0}, "id": 2, "options": {"legend": {"calcs": ["last", "lastNotNull", "min", "max", "mean"], "displayMode": "table", "placement": "bottom", "showLegend": true}, "tooltip": {"maxHeight": 600, "mode": "multi", "sort": "none"}}, "targets": [{"datasource": {"type": "loki", "uid": "RFdn8Qtnz"}, "editorMode": "code", "expr": "avg(avg_over_time(\n{host=~\".+\", host=\"docker\", filename=~\"/logs/ping/.*\", target!=\"\", target=~\"$host\" } \n|= \"time=\"\n| regexp \"target=(?P<target>[^ ]+)\"\n| regexp \"time=(?P<time>[^ ]+)\"\n| unwrap time\n[$interval]\n)) by (target)\n\n", "legendFormat": "{{target}}", "queryType": "range", "refId": "A"}], "title": "Ping Times ($interval interval)", "type": "timeseries"}, {"datasource": {}, "description": "", "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "% packet loss", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "auto", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "max": 100, "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 80}]}}, "overrides": []}, "gridPos": {"h": 11, "w": 12, "x": 0, "y": 14}, "id": 8, "options": {"legend": {"calcs": ["last", "lastNotNull", "min", "max", "mean"], "displayMode": "table", "placement": "bottom", "showLegend": true}, "tooltip": {"maxHeight": 600, "mode": "multi", "sort": "none"}}, "targets": [{"datasource": {"type": "loki", "uid": "RFdn8Qtnz"}, "editorMode": "code", "expr": "avg(avg_over_time(\n{ filename=~\"/logs/ping/.*\", target!=\"\", target=~\"internal-.*\", target=~\"$host\" } \n|= \"transmitted\"\n| logfmt \n| line_format \"pct={{divf .received .transmitted | mulf 100 | sub 100 }}\"\n| logfmt \n| unwrap pct\n| __error__!=\"SampleExtractionErr\"\n[$interval]\n)) \n\n", "legendFormat": "{{target}}", "queryType": "range", "refId": "A"}], "title": "Packet Loss - Interal Hosts ($interval interval)", "type": "timeseries"}, {"datasource": {}, "description": "", "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "% packet loss", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "auto", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "max": 100, "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 80}]}}, "overrides": []}, "gridPos": {"h": 11, "w": 12, "x": 12, "y": 14}, "id": 5, "options": {"legend": {"calcs": ["last", "lastNotNull", "min", "max", "mean"], "displayMode": "table", "placement": "bottom", "showLegend": true}, "tooltip": {"maxHeight": 600, "mode": "multi", "sort": "none"}}, "targets": [{"datasource": {"type": "loki", "uid": "RFdn8Qtnz"}, "editorMode": "code", "expr": "avg(avg_over_time(\n{ filename=~\"/logs/ping/.*\", target != \"\", target=~\"internal-.*\", target=~\"$host\" } \n|= \"transmitted\"\n| logfmt \n| line_format \"pct={{divf .received .transmitted | mulf 100 | sub 100 }}\"\n| logfmt \n| unwrap pct\n| __error__!=\"SampleExtractionErr\"\n[$interval]\n)) by (target)\n\n", "legendFormat": "{{target}}", "queryType": "range", "refId": "A"}], "title": "Packet Loss by Host - Internal Host ($interval interval)", "type": "timeseries"}, {"datasource": {}, "description": "", "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "% packet loss", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "auto", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "max": 100, "thresholds": {"mode": "absolute", "steps": [{"color": "green"}, {"color": "red", "value": 80}]}}, "overrides": []}, "gridPos": {"h": 11, "w": 12, "x": 0, "y": 25}, "id": 7, "options": {"legend": {"calcs": ["last", "lastNotNull", "min", "max", "mean"], "displayMode": "table", "placement": "bottom", "showLegend": true}, "tooltip": {"maxHeight": 600, "mode": "multi", "sort": "none"}}, "targets": [{"datasource": {"type": "loki", "uid": "RFdn8Qtnz"}, "editorMode": "code", "expr": "avg(avg_over_time(\n{ filename=~\"/logs/ping/.*\", target!=\"\", target!~\"internal-.*\", target=~\"$host\" } \n|= \"transmitted\"\n| logfmt \n| line_format \"pct={{divf .received .transmitted | mulf 100 | sub 100 }}\"\n| logfmt \n| unwrap pct\n| __error__!=\"SampleExtractionErr\"\n[$interval]\n)) \n\n", "legendFormat": "{{target}}", "queryType": "range", "refId": "A"}], "title": "Packet Loss - External Hosts ($interval interval)", "type": "timeseries"}, {"datasource": {}, "description": "", "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "% packet loss", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "auto", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "max": 100, "thresholds": {"mode": "absolute", "steps": [{"color": "green"}, {"color": "red", "value": 80}]}}, "overrides": []}, "gridPos": {"h": 11, "w": 12, "x": 12, "y": 25}, "id": 3, "options": {"legend": {"calcs": ["last", "lastNotNull", "min", "max", "mean"], "displayMode": "table", "placement": "bottom", "showLegend": true}, "tooltip": {"maxHeight": 600, "mode": "multi", "sort": "none"}}, "targets": [{"datasource": {"type": "loki", "uid": "RFdn8Qtnz"}, "editorMode": "code", "expr": "avg(avg_over_time(\n{ filename=~\"/logs/ping/.*\", target != \"\", target!~\"internal-.*\", target=~\"$host\" } \n|= \"transmitted\"\n| logfmt \n| line_format \"pct={{divf .received .transmitted | mulf 100 | sub 100 }}\"\n| logfmt \n| unwrap pct\n| __error__!=\"SampleExtractionErr\"\n[$interval]\n)) by (target)\n\n", "legendFormat": "{{target}}", "queryType": "range", "refId": "A"}], "title": "Packet Loss by Host - External Hosts ($interval interval)", "type": "timeseries"}], "refresh": "", "schemaVersion": 39, "tags": [], "templating": {"list": [{"auto": false, "auto_count": 30, "auto_min": "10s", "current": {"selected": false, "text": "10s", "value": "10s"}, "hide": 0, "name": "interval", "options": [{"selected": true, "text": "10s", "value": "10s"}, {"selected": false, "text": "30s", "value": "30s"}, {"selected": false, "text": "1m", "value": "1m"}, {"selected": false, "text": "5m", "value": "5m"}, {"selected": false, "text": "15m", "value": "15m"}, {"selected": false, "text": "30m", "value": "30m"}, {"selected": false, "text": "1h", "value": "1h"}, {"selected": false, "text": "6h", "value": "6h"}, {"selected": false, "text": "12h", "value": "12h"}, {"selected": false, "text": "1d", "value": "1d"}, {"selected": false, "text": "7d", "value": "7d"}, {"selected": false, "text": "14d", "value": "14d"}, {"selected": false, "text": "30d", "value": "30d"}], "query": "10s,30s,1m,5m,15m,30m,1h,6h,12h,1d,7d,14d,30d", "queryValue": "", "refresh": 2, "skipUrlSync": false, "type": "interval"}, {"current": {"selected": true, "text": ["All"], "value": ["$__all"]}, "datasource": {"type": "loki", "uid": "cdn42ujjafrpcd"}, "definition": "", "hide": 0, "includeAll": true, "multi": true, "name": "host", "options": [], "query": {"label": "target", "refId": "LokiVariableQueryEditor-VariableQuery", "stream": "", "type": 1}, "refresh": 2, "regex": "", "skipUrlSync": false, "sort": 1, "type": "query"}]}, "time": {"from": "now-5m", "to": "now"}, "timeRangeUpdatedDuringEditOrView": false, "timepicker": {"refresh_intervals": ["5s", "10s", "30s", "1m", "5m", "15m", "30m", "1h", "2h", "1d"]}, "timezone": "", "title": "Ping Results - Internal vs External", "uid": "KfLZ8yvVk", "version": 4, "weekStart": ""}, {"annotations": {"list": [{"builtIn": 1, "datasource": {"type": "datasource", "uid": "grafana"}, "enable": true, "hide": true, "iconColor": "rgba(0, 211, 255, 1)", "name": "Annotations & Alerts", "target": {"limit": 100, "matchAny": false, "tags": [], "type": "dashboard"}, "type": "dashboard"}]}, "editable": true, "fiscalYearStartMonth": 0, "graphTooltip": 0, "id": 5, "links": [{"asDropdown": false, "icon": "external link", "includeVars": false, "keepTime": false, "tags": [], "targetBlank": true, "title": "Grafana Playground GitHub Page", "tooltip": "", "type": "link", "url": "https://github.com/dmuth/grafana-playground"}, {"asDropdown": false, "icon": "dashboard", "includeVars": true, "keepTime": true, "tags": [], "targetBlank": false, "title": "Ping Results", "tooltip": "", "type": "link", "url": "/d/WiThvuS7z/"}, {"asDropdown": false, "icon": "dashboard", "includeVars": true, "keepTime": true, "tags": [], "targetBlank": false, "title": "Ping Results - Internal vs External", "tooltip": "", "type": "link", "url": "/d/KfLZ8yvVk/"}], "liveNow": false, "panels": [{"datasource": {}, "description": "", "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "ms", "axisPlacement": "auto", "axisSoftMin": 0, "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "auto", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 80}]}}, "overrides": []}, "gridPos": {"h": 14, "w": 23, "x": 0, "y": 0}, "id": 2, "options": {"legend": {"calcs": ["last", "lastNotNull", "min", "max", "mean"], "displayMode": "table", "placement": "bottom", "showLegend": true}, "tooltip": {"maxHeight": 600, "mode": "multi", "sort": "none"}}, "targets": [{"datasource": {"type": "loki", "uid": "RFdn8Qtnz"}, "editorMode": "code", "expr": "avg(avg_over_time(\n{host=~\".+\", host=\"docker\", filename=~\"/logs/ping/.*\", target!=\"\", target=~\"$host\" } \n|= \"time=\"\n| regexp \"target=(?P<target>[^ ]+)\"\n| regexp \"time=(?P<time>[^ ]+)\"\n| unwrap time\n[$interval]\n)) by (target)\n\n", "legendFormat": "{{target}}", "queryType": "range", "refId": "A"}], "title": "Ping Times - All Hosts ($interval interval)", "type": "timeseries"}, {"datasource": {}, "description": "", "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "% packet loss", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "auto", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "max": 100, "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 80}]}}, "overrides": []}, "gridPos": {"h": 11, "w": 12, "x": 0, "y": 14}, "id": 8, "options": {"legend": {"calcs": ["last", "lastNotNull", "min", "max", "mean"], "displayMode": "table", "placement": "bottom", "showLegend": true}, "tooltip": {"maxHeight": 600, "mode": "multi", "sort": "none"}}, "targets": [{"datasource": {"type": "loki", "uid": "RFdn8Qtnz"}, "editorMode": "code", "expr": "avg(avg_over_time(\n{ filename=~\"/logs/ping/.*\", target!=\"\", target=~\"internal-.*\", target=~\"$host\" } \n|= \"transmitted\"\n| logfmt \n| line_format \"pct={{divf .received .transmitted | mulf 100 | sub 100 }}\"\n| logfmt \n| unwrap pct\n| __error__!=\"SampleExtractionErr\"\n[$interval]\n)) \n\n", "legendFormat": "{{target}}", "queryType": "range", "refId": "A"}], "title": "Packet Loss - Interal Hosts ($interval interval)", "type": "timeseries"}, {"datasource": {}, "description": "", "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "% packet loss", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "auto", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "max": 100, "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 80}]}}, "overrides": []}, "gridPos": {"h": 11, "w": 12, "x": 12, "y": 14}, "id": 5, "options": {"legend": {"calcs": ["last", "lastNotNull", "min", "max", "mean"], "displayMode": "table", "placement": "bottom", "showLegend": true}, "tooltip": {"maxHeight": 600, "mode": "multi", "sort": "none"}}, "targets": [{"datasource": {"type": "loki", "uid": "RFdn8Qtnz"}, "editorMode": "code", "expr": "avg(avg_over_time(\n{ filename=~\"/logs/ping/.*\", target != \"\", target=~\"internal-.*\", target=~\"$host\" } \n|= \"transmitted\"\n| logfmt \n| line_format \"pct={{divf .received .transmitted | mulf 100 | sub 100 }}\"\n| logfmt \n| unwrap pct\n| __error__!=\"SampleExtractionErr\"\n[$interval]\n)) by (target)\n\n", "legendFormat": "{{target}}", "queryType": "range", "refId": "A"}], "title": "Packet Loss by Host - Internal Hosts ($interval interval)", "type": "timeseries"}, {"datasource": {"type": "loki", "uid": "NGMbUmp4k"}, "description": "", "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "% packet loss", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "auto", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "max": 100, "thresholds": {"mode": "absolute", "steps": [{"color": "green"}, {"color": "red", "value": 80}]}}, "overrides": []}, "gridPos": {"h": 11, "w": 12, "x": 0, "y": 25}, "id": 9, "options": {"legend": {"calcs": ["last", "lastNotNull", "min", "max", "mean"], "displayMode": "table", "placement": "bottom", "showLegend": true}, "tooltip": {"mode": "multi", "sort": "none"}}, "targets": [{"datasource": {"type": "loki", "uid": "RFdn8Qtnz"}, "editorMode": "code", "expr": "avg(avg_over_time(\n{ filename=~\"/logs/ping/.*\", target!=\"\", target=~\"upstream-.*\", target=~\"$host\" } \n|= \"transmitted\"\n| logfmt \n| line_format \"pct={{divf .received .transmitted | mulf 100 | sub 100 }}\"\n| logfmt \n| unwrap pct\n| __error__!=\"SampleExtractionErr\"\n[$interval]\n)) \n\n", "legendFormat": "{{target}}", "queryType": "range", "refId": "A"}], "title": "Packet Loss - Upstream Hosts ($interval interval)", "type": "timeseries"}, {"datasource": {}, "description": "", "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "% packet loss", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "auto", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "max": 100, "thresholds": {"mode": "absolute", "steps": [{"color": "green"}, {"color": "red", "value": 80}]}}, "overrides": []}, "gridPos": {"h": 11, "w": 12, "x": 12, "y": 25}, "id": 10, "options": {"legend": {"calcs": ["last", "lastNotNull", "min", "max", "mean"], "displayMode": "table", "placement": "bottom", "showLegend": true}, "tooltip": {"mode": "multi", "sort": "none"}}, "targets": [{"datasource": {"type": "loki", "uid": "RFdn8Qtnz"}, "editorMode": "code", "expr": "avg(avg_over_time(\n{ filename=~\"/logs/ping/.*\", target != \"\", target=~\"upstream-.*\", target=~\"$host\" } \n|= \"transmitted\"\n| logfmt \n| line_format \"pct={{divf .received .transmitted | mulf 100 | sub 100 }}\"\n| logfmt \n| unwrap pct\n| __error__!=\"SampleExtractionErr\"\n[$interval]\n)) by (target)\n\n", "legendFormat": "{{target}}", "queryType": "range", "refId": "A"}], "title": "Packet Loss by Host - Upstream Hosts ($interval interval)", "type": "timeseries"}, {"datasource": {}, "description": "", "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "% packet loss", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "auto", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "max": 100, "thresholds": {"mode": "absolute", "steps": [{"color": "green"}, {"color": "red", "value": 80}]}}, "overrides": []}, "gridPos": {"h": 11, "w": 12, "x": 0, "y": 36}, "id": 7, "options": {"legend": {"calcs": ["last", "lastNotNull", "min", "max", "mean"], "displayMode": "table", "placement": "bottom", "showLegend": true}, "tooltip": {"mode": "multi", "sort": "none"}}, "targets": [{"datasource": {"type": "loki", "uid": "RFdn8Qtnz"}, "editorMode": "code", "expr": "avg(avg_over_time(\n{ filename=~\"/logs/ping/.*\", target!=\"\", target!~\"internal-.*\", target=~\"$host\" } \n|= \"transmitted\"\n| logfmt \n| line_format \"pct={{divf .received .transmitted | mulf 100 | sub 100 }}\"\n| logfmt \n| unwrap pct\n| __error__!=\"SampleExtractionErr\"\n[$interval]\n)) \n\n", "legendFormat": "{{target}}", "queryType": "range", "refId": "A"}], "title": "Packet Loss - External Hosts ($interval interval)", "type": "timeseries"}, {"datasource": {}, "description": "", "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "% packet loss", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "auto", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "max": 100, "thresholds": {"mode": "absolute", "steps": [{"color": "green"}, {"color": "red", "value": 80}]}}, "overrides": []}, "gridPos": {"h": 11, "w": 12, "x": 12, "y": 36}, "id": 3, "options": {"legend": {"calcs": ["last", "lastNotNull", "min", "max", "mean"], "displayMode": "table", "placement": "bottom", "showLegend": true}, "tooltip": {"mode": "multi", "sort": "none"}}, "targets": [{"datasource": {"type": "loki", "uid": "RFdn8Qtnz"}, "editorMode": "code", "expr": "avg(avg_over_time(\n{ filename=~\"/logs/ping/.*\", target != \"\", target!~\"internal-.*\", target!~\"upstream-.*\", target=~\"$host\" } \n|= \"transmitted\"\n| logfmt \n| line_format \"pct={{divf .received .transmitted | mulf 100 | sub 100 }}\"\n| logfmt \n| unwrap pct\n| __error__!=\"SampleExtractionErr\"\n[$interval]\n)) by (target)\n\n", "legendFormat": "{{target}}", "queryType": "range", "refId": "A"}], "title": "Packet Loss by Host - External Hosts ($interval interval)", "type": "timeseries"}], "refresh": "", "schemaVersion": 39, "tags": [], "templating": {"list": [{"auto": false, "auto_count": 30, "auto_min": "10s", "current": {"selected": false, "text": "10s", "value": "10s"}, "hide": 0, "name": "interval", "options": [{"selected": true, "text": "10s", "value": "10s"}, {"selected": false, "text": "30s", "value": "30s"}, {"selected": false, "text": "1m", "value": "1m"}, {"selected": false, "text": "5m", "value": "5m"}, {"selected": false, "text": "15m", "value": "15m"}, {"selected": false, "text": "30m", "value": "30m"}, {"selected": false, "text": "1h", "value": "1h"}, {"selected": false, "text": "6h", "value": "6h"}, {"selected": false, "text": "12h", "value": "12h"}, {"selected": false, "text": "1d", "value": "1d"}, {"selected": false, "text": "7d", "value": "7d"}, {"selected": false, "text": "14d", "value": "14d"}, {"selected": false, "text": "30d", "value": "30d"}], "query": "10s,30s,1m,5m,15m,30m,1h,6h,12h,1d,7d,14d,30d", "queryValue": "", "refresh": 2, "skipUrlSync": false, "type": "interval"}, {"current": {"selected": true, "text": ["All"], "value": ["$__all"]}, "definition": "", "hide": 0, "includeAll": true, "multi": true, "name": "host", "options": [], "query": {"label": "target", "refId": "LokiVariableQueryEditor-VariableQuery", "stream": "", "type": 1}, "refresh": 2, "regex": "", "skipUrlSync": false, "sort": 0, "type": "query"}]}, "time": {"from": "now-5m", "to": "now"}, "timeRangeUpdatedDuringEditOrView": false, "timepicker": {"refresh_intervals": ["5s", "10s", "30s", "1m", "5m", "15m", "30m", "1h", "2h", "1d"]}, "timezone": "", "title": "Ping Results - Internal vs Upstream vs External", "uid": "BXSaiQcVz", "version": 2, "weekStart": ""}, {"annotations": {"list": [{"builtIn": 1, "datasource": {"type": "datasource", "uid": "grafana"}, "enable": true, "hide": true, "iconColor": "rgba(0, 211, 255, 1)", "name": "Annotations & Alerts", "target": {"limit": 100, "matchAny": false, "tags": [], "type": "dashboard"}, "type": "dashboard"}]}, "editable": true, "fiscalYearStartMonth": 0, "graphTooltip": 0, "id": 6, "links": [{"asDropdown": false, "icon": "external link", "includeVars": false, "keepTime": false, "tags": [], "targetBlank": true, "title": "Grafana Playground GitHub Page", "tooltip": "", "type": "link", "url": "https://github.com/dmuth/grafana-playground"}, {"asDropdown": false, "icon": "dashboard", "includeVars": true, "keepTime": true, "tags": [], "targetBlank": false, "title": "Ping Results - Internal vs External", "tooltip": "", "type": "link", "url": "/d/KfLZ8yvVk/"}, {"asDropdown": false, "icon": "dashboard", "includeVars": true, "keepTime": true, "tags": [], "targetBlank": false, "title": "Ping Results - Internal vs Upstream vs External", "tooltip": "", "type": "link", "url": "http://localhost:3000/d/BXSaiQcVz"}], "liveNow": false, "panels": [{"datasource": {}, "description": "", "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "ms", "axisPlacement": "auto", "axisSoftMin": 0, "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "auto", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 80}]}}, "overrides": []}, "gridPos": {"h": 16, "w": 23, "x": 0, "y": 0}, "id": 5, "options": {"legend": {"calcs": ["last", "lastNotNull", "min", "max", "mean"], "displayMode": "table", "placement": "bottom", "showLegend": true}, "tooltip": {"maxHeight": 600, "mode": "multi", "sort": "none"}}, "targets": [{"datasource": {"type": "loki", "uid": "NGMbUmp4k"}, "editorMode": "code", "expr": "avg(quantile_over_time(0.99, \n{host=~\".+\", host=\"docker\", filename=~\"/logs/ping/.*\", target=~\"$host\" } \n|= \"time=\"\n| regexp \"target=(?P<target>[^ ]+)\"\n| regexp \"time=(?P<time>[^ ]+)\"\n| unwrap time\n[$interval]\n)) by (target)\n\n", "hide": false, "legendFormat": "{{target}} - 99th Percentile", "queryType": "range", "refId": "A"}, {"datasource": {"type": "loki", "uid": "NGMbUmp4k"}, "editorMode": "code", "expr": "avg(quantile_over_time(0.95, \n{host=~\".+\", host=\"docker\", filename=~\"/logs/ping/.*\", target=~\"$host\" } \n|= \"time=\"\n| regexp \"target=(?P<target>[^ ]+)\"\n| regexp \"time=(?P<time>[^ ]+)\"\n| unwrap time\n[$interval]\n)) by (target)\n\n", "hide": false, "legendFormat": "{{target}} - 95th Percentile", "queryType": "range", "refId": "B"}, {"datasource": {"type": "loki", "uid": "NGMbUmp4k"}, "editorMode": "code", "expr": "avg(quantile_over_time(0.50, \n{host=~\".+\", host=\"docker\", filename=~\"/logs/ping/.*\", target=~\"$host\" } \n|= \"time=\"\n| regexp \"target=(?P<target>[^ ]+)\"\n| regexp \"time=(?P<time>[^ ]+)\"\n| unwrap time\n[$interval]\n)) by (target)\n\n", "hide": false, "legendFormat": "{{target}} - 50th Percentile", "queryType": "range", "refId": "C"}, {"datasource": {"type": "loki", "uid": "NGMbUmp4k"}, "editorMode": "code", "expr": "avg(quantile_over_time(0.05, \n{host=~\".+\", host=\"docker\", filename=~\"/logs/ping/.*\", target=~\"$host\" } \n|= \"time=\"\n| regexp \"target=(?P<target>[^ ]+)\"\n| regexp \"time=(?P<time>[^ ]+)\"\n| unwrap time\n[$interval]\n)) by (target)\n\n", "hide": false, "legendFormat": "{{target}} - 5th Percentile", "queryType": "range", "refId": "D"}], "title": "Percentile Breakdown ($interval interval)", "type": "timeseries"}, {"datasource": {}, "description": "", "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "ms", "axisPlacement": "auto", "axisSoftMin": 0, "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "auto", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 80}]}}, "overrides": []}, "gridPos": {"h": 10, "w": 23, "x": 0, "y": 16}, "id": 4, "options": {"legend": {"calcs": ["last", "lastNotNull", "min", "max", "mean"], "displayMode": "table", "placement": "bottom", "showLegend": true}, "tooltip": {"maxHeight": 600, "mode": "multi", "sort": "none"}}, "targets": [{"datasource": {"type": "loki", "uid": "NGMbUmp4k"}, "editorMode": "code", "expr": "max(max_over_time(\n{host=~\".+\", host=\"docker\", filename=~\"/logs/ping/.*\", target=~\"$host\" } \n|= \"time=\"\n| regexp \"target=(?P<target>[^ ]+)\"\n| regexp \"time=(?P<time>[^ ]+)\"\n| unwrap time\n[$interval]\n)) by (target)\n\n", "hide": false, "legendFormat": "{{target}} - Max", "queryType": "range", "refId": "A"}], "title": "Max Ping Time ($interval interval)", "type": "timeseries"}], "refresh": "", "schemaVersion": 39, "tags": [], "templating": {"list": [{"auto": false, "auto_count": 30, "auto_min": "10s", "current": {"selected": false, "text": "10s", "value": "10s"}, "hide": 0, "name": "interval", "options": [{"selected": true, "text": "10s", "value": "10s"}, {"selected": false, "text": "30s", "value": "30s"}, {"selected": false, "text": "1m", "value": "1m"}, {"selected": false, "text": "5m", "value": "5m"}, {"selected": false, "text": "15m", "value": "15m"}, {"selected": false, "text": "30m", "value": "30m"}, {"selected": false, "text": "1h", "value": "1h"}, {"selected": false, "text": "6h", "value": "6h"}, {"selected": false, "text": "12h", "value": "12h"}, {"selected": false, "text": "1d", "value": "1d"}, {"selected": false, "text": "7d", "value": "7d"}, {"selected": false, "text": "14d", "value": "14d"}, {"selected": false, "text": "30d", "value": "30d"}], "query": "10s,30s,1m,5m,15m,30m,1h,6h,12h,1d,7d,14d,30d", "queryValue": "", "refresh": 2, "skipUrlSync": false, "type": "interval"}, {"current": {"selected": true, "text": ["All"], "value": ["$__all"]}, "datasource": {"type": "loki", "uid": "cdn42ujjafrpcd"}, "definition": "", "hide": 0, "includeAll": true, "multi": true, "name": "host", "options": [], "query": {"label": "target", "refId": "LokiVariableQueryEditor-VariableQuery", "stream": "", "type": 1}, "refresh": 2, "regex": "", "skipUrlSync": false, "sort": 0, "type": "query"}]}, "time": {"from": "now-5m", "to": "now"}, "timeRangeUpdatedDuringEditOrView": false, "timepicker": {"refresh_intervals": ["5s", "10s", "30s", "1m", "5m", "15m", "30m", "1h", "2h", "1d"]}, "timezone": "", "title": "Ping Results - Percentile", "uid": "e0b53729-94b0-4788-b002-3e97ec1c890a", "version": 3, "weekStart": ""}], "meta": {"app": "Grafana Playground"}}
